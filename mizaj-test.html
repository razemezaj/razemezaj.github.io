<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>تست مزاج‌شناسی – ۱۰ سؤال مجاهدی</title>

  <!-- فونت و متا -->
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet" />

  <!-- استایل اختصاصی صفحه تست -->
  <style>
    /* ==== Theme Variables (هماهنگ با styles.css اصلی) ==== */
    :root {
      --green-main: #0D5E2A;
      --green-soft: #A6D5A6;
      --bg-cream: #FFF9F1;
      --gold: #B4881D;
      --brown: #8B5A2B;
    }

    /* ==== Reset & Base ==== */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: "Vazirmatn", "Tahoma", Arial, sans-serif;
      background: var(--bg-cream);
      color: var(--green-main);
      line-height: 1.6;
      direction: rtl;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    h1, h2 { text-align: center; margin-bottom: 1rem; }

    /* ==== Container ==== */
    .container {
      width: 90%;
      max-width: 760px;
      margin: 3rem auto;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.12);
      overflow: hidden;
      padding: 2rem 1.5rem 3.5rem;
      position: relative;
    }

    /* ==== Progress Bar ==== */
    .progress-wrapper {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 6px;
      background: #e5e5e5;
    }
    .progress {
      width: 0;
      height: 100%;
      background: var(--gold);
      transition: width 0.3s ease;
    }

    /* ==== Question Card ==== */
    .question-card {
      margin-bottom: 2.25rem;
    }
    .q-title {
      font-weight: 700;
      margin-bottom: 1rem;
      font-size: 1.1rem;
    }
    .options {
      display: flex;
      flex-direction: column;
      gap: .75rem;
    }
    .option {
      background: var(--green-soft);
      padding: .8rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      transition: transform .15s ease, background .15s ease;
      user-select: none;
    }
    .option:hover { transform: translateY(-2px); }
    .option.selected { background: var(--gold); color:#000; }

    /* ==== Buttons ==== */
    .btn {
      display: inline-block;
      background: var(--gold);
      color: #000;
      padding: .9rem 2.2rem;
      border: none;
      border-radius: 8px;
      font-weight: 700;
      cursor: pointer;
      transition: filter .2s;
    }
    .btn:hover { filter: brightness(1.1); }
    .btn:disabled { opacity: .5; cursor: not-allowed; }

    /* ==== Result Box ==== */
    .result-box {
      display: none;
      flex-direction: column;
      gap: 1rem;
      text-align: center;
      margin-top: 2rem;
      animation: fadeIn .5s forwards;
    }
    .result-title {
      font-size: 1.4rem;
      font-weight: 700;
    }
    .result-type {
      font-size: 1.9rem;
      font-weight: 700;
      color: var(--gold);
    }
    @keyframes fadeIn { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }

    /* ==== Responsive ==== */
    @media (max-width:600px){
      .container{padding:1.5rem 1rem 3rem}
      .option{font-size:.9rem}
    }
  </style>
</head>
<body>

  <div class="container" id="app">
    <!-- نوار پیشرفت -->
    <div class="progress-wrapper"><div class="progress" id="progress"></div></div>

    <!-- عنوان -->
    <h1>تست مزاج‌شناسی (نسخه ۱۰‌سؤالی)</h1>
    <p style="text-align:center;margin-bottom:2rem;">با پاسخ دادن به ۱۰ پرسش، مزاج پایه خود را بیابید.</p>

    <!-- جایگاه سؤالات -->
    <div id="question-wrapper"></div>

    <!-- دکمه بعدی / نمایش نتیجه -->
    <div style="text-align:center;">
      <button class="btn" id="next-btn" disabled>سؤال بعدی</button>
    </div>

    <!-- نتیجه -->
    <div class="result-box" id="result-box">
      <h2 class="result-title">نتیجه تست شما</h2>
      <div class="result-type" id="result-type"></div>
      <p id="result-desc"></p>
      <button class="btn" onclick="location.reload()">تکرار تست</button>
    </div>
  </div>

  <!-- ==== JavaScript ==== -->
  <script>
    // ——— داده‌های آزمون: 10 سؤال مجاهدی ———
    // index 0-7 → محور گرمی/سردی    | 8-9 → محور تری/خشکی
    const questions = [
      { text: "دمای دست و پای شما معمولاً چگونه است؟", options: ["سرد", "معمولی", "گرم"] },
      { text: "تحمل شما در برابر گرما چیست؟",           options: ["ضعیف", "متوسط", "عالی"] },
      { text: "تحمل شما در برابر سرما چیست؟",           options: ["عالی", "متوسط", "ضعیف"] },
      { text: "رنگ چهره شما در حالت عادی چگونه است؟",   options: ["پریده", "گندمی", "سرخ"] },
      { text: "سرعت صحبت یا حرکت شما چگونه است؟",       options: ["کند", "متوسط", "سریع"] },
      { text: "اشتها و میل به غذا در شما چگونه است؟",    options: ["کم", "معمولی", "زیاد"] },
      { text: "عرق شما در فعالیت متوسط چقدر است؟",      options: ["کم", "متوسط", "زیاد"] },
      { text: "ضربان قلب و نبض شما چگونه احساس می‌شود؟", options: ["کند", "متوسط", "تیز"] },
      { text: "مدت خواب شبانه شما چقدر است؟",           options: ["زیاد (۸+ ساعت)", "معمولی", "کم (≤۵ ساعت)"] },
      { text: "پوستتان از نظر رطوبت چگونه است؟",        options: ["مرطوب/نرم", "معمولی", "خشک/زبر"] }
    ];

    // ——— متغیرهای وضعیت ———
    let currentQ = 0;
    let answers  = []; // ارزش 1,2,3
    const qWrap   = document.getElementById("question-wrapper");
    const nextBtn = document.getElementById("next-btn");
    const progressBar = document.getElementById("progress");
    const resultBox   = document.getElementById("result-box");
    const resultType  = document.getElementById("result-type");
    const resultDesc  = document.getElementById("result-desc");

    // ——— رندر سؤال ———
    function renderQuestion() {
      const q = questions[currentQ];
      // پاک کردن
      qWrap.innerHTML = "";
      nextBtn.disabled = true;
      // کارت سؤال
      const card = document.createElement("div");
      card.className = "question-card";
      // عنوان
      const title = document.createElement("div");
      title.className = "q-title";
      title.textContent = `سوال ${currentQ + 1} از ${questions.length}: ${q.text}`;
      card.appendChild(title);
      // گزینه‌ها
      const optsDiv = document.createElement("div");
      optsDiv.className = "options";
      q.options.forEach((opt, idx) => {
        const optDiv = document.createElement("div");
        optDiv.className = "option";
        optDiv.textContent = opt;
        optDiv.onclick = () => {
          // انتخاب
          optsDiv.querySelectorAll(".option").forEach(o => o.classList.remove("selected"));
          optDiv.classList.add("selected");
          answers[currentQ] = idx + 1;        // امتیاز 1..3
          nextBtn.disabled = false;
        };
        optsDiv.appendChild(optDiv);
      });
      card.appendChild(optsDiv);
      qWrap.appendChild(card);

      // به‌روزرسانی نوار پیشرفت
      const percent = (currentQ / questions.length) * 100;
      progressBar.style.width = percent + "%";
      nextBtn.textContent = currentQ === questions.length - 1 ? "مشاهده نتیجه" : "سؤال بعدی";
    }

    // ——— محاسبه نتیجه ———
    function calcResult() {
      // مجموع محور 1: گرمی/سردی (سوال 0-7)
      const warmSum = answers.slice(0, 8).reduce((a, b) => a + b, 0); // 8..24
      // مجموع محور 2: تری/خشکی (سوال 8-9)
      const wetSum  = answers.slice(8, 10).reduce((a, b) => a + b, 0); // 2..6

      let warmType, wetType, mizajName, desc;

      // معیارهای مجاهدی
      if (warmSum <= 14) warmType = "سرد";
      else if (warmSum <= 18) warmType = "معتدل";
      else warmType = "گرم";

      if (wetSum <= 3) wetType = "تر";
      else if (wetSum == 4) wetType = "معتدل";
      else wetType = "خشک";

      // تعیین مزاج نهایی
      if (warmType === "معتدل" && wetType === "معتدل") {
        mizajName = "مزاج معتدل";
        desc = "به‌نظر می‌رسد در هر دو محور گرمی/سردی و تری/خشکی تعادل دارید.";
      } else {
        mizajName = `${warmType} و ${wetType}`;
        // توضیح کوتاه
        const map = {
          "گرم و تر": "مزاج دموی (گرم‌مزاجِ مرطوب)؛ پرانرژی با خون‌رسانی بالا.",
          "گرم و خشک": "مزاج صفراوی؛ سریع، فعال و مستعد خشکی یا گرمازدگی.",
          "سرد و تر": "مزاج بلغمی؛ آرام، خواب‌آلود و مستعد رطوبت یا احتباس مایعات.",
          "سرد و خشک": "مزاج سوداوی؛ دقیق، درون‌گرا و مستعد یبوست یا خشکی پوست.",
          "سرد و معتدل": "در محور سردی کمی تمایل به سرمزاجی دارید.",
          "گرم و معتدل": "در محور گرمی کمی تمایل به گرمی مزاج دارید.",
          "معتدل و تر": "در محور رطوبت کمی تمایل به تری دارید.",
          "معتدل و خشک": "در محور خشکی کمی تمایل به خشکی دارید."
        };
        desc = map[mizajName] || "";
      }

      // نمایش
      resultType.textContent = mizajName;
      resultDesc.textContent = desc;
      resultBox.style.display = "flex";
      // اسکرول
      resultBox.scrollIntoView({behavior:"smooth"});
    }

    // ——— هندل کلیک بعدی ———
    nextBtn.onclick = () => {
      if (nextBtn.disabled) return;
      if (currentQ < questions.length - 1) {
        currentQ++;
        renderQuestion();
      } else {
        // پایان
        progressBar.style.width = "100%";
        qWrap.innerHTML = "";  // پنهان کردن سؤال‌ها
        nextBtn.style.display = "none";
        calcResult();
      }
    };

    // شروع
    renderQuestion();
  </script>
</body>
</html>
